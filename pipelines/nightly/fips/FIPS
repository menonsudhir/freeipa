
@Library("idm-ci@master")
import idmci.*

env.IPA_EMAIL = 'ipa-and-samba-team-automation@redhat.com'
env.RHEL_VERSION = '8.3.0'
env.BASE_IMAGE = 'nightly'
env.ANSIBLE_GATHER_TIMEOUT = '60'
env.NIGHTLY = 'true'
env.FIPS = 'true'
env.IDMCI_SLAVE = 'idm-ci-slave'
env.ABRT_EMAIL= 'ipa-qe@redhat.com'

properties([
    pipelineTriggers([cron('0 23 * * 3')]),
])

node {
    try {
        new ComposeID().exec(env.IDMCI_SLAVE)
    } catch (Exception e) {
        sh script: "echo 'Display COMPOSE_ID unsuccessful'"
        currentBuild.result = 'SUCCESS'
    }
    try {
        stage("upstream") {
          parallel(
            "upstream::advise": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/advise.yaml',
                    test: 'advise',
                    email: 'ksiddiqu@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

/* Temporary disabled due to https://bugzilla.redhat.com/show_bug.cgi?id=1860129
            "upstream::adtrust_install": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/adtrust_install.yaml',
                    test: 'upstream-adtrust_install',
                    email: 'sorlov@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
*/

            "upstream::authselect": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/authselect.yaml',
                    test: 'authselect',
                    email: 'frenaud@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::caless-TestServerInstall": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/caless-TestServerInstall.yaml',
                    test: 'caless-TestServerInstall',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::caless-TestReplicaInstall": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/caless-TestReplicaInstall.yaml',
                    test: 'caless-TestReplicaInstall',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::commands": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/commands.yaml',
                    test: 'commands',
                    email: 'ksiddiqu@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::nfs": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/nfs.yaml',
                    test: 'nfs',
                    email: 'mvarun@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::pki-config-override": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/pki_config_override.yaml',
                    test: 'pki-config-override',
                    email: 'ksiddiqu@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

/* Temporary disabled due to https://bugzilla.redhat.com/show_bug.cgi?id=1860129
            "upstream::smb": {
                new TeRun([
                    metadata: 'metadata/upstream/integration/smb.yaml',
                    test: 'upstream-smb',
                    email: 'sorlov@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
*/

            "upstream::xmlrpc": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/xmlrpc/xmlrpc-tests.yaml',
                    test: 'upstream-xmlrpc',
                    email: 'sorlov@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::automember": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/automember.yaml',
                    test: 'automember',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::backup_and_restore-TestBackupAndRestore": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/backup_and_restore-TestBackupAndRestore.yaml',
                    test: 'backup_and_restore-TestBackupAndRestore',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::backup_and_restore-TestBackupAndRestoreDMPassword": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/backup_and_restore-TestBackupAndRestoreDMPassword.yaml',
                    test: 'backup_and_restore-TestBackupAndRestoreDMPassword',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::backup_and_restore-TestBackupAndRestoreWithDNS": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/backup_and_restore-TestBackupAndRestoreWithDNS.yaml',
                    test: 'backup_and_restore-TestBackupAndRestoreWithDNS',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::backup_and_restore::TestBackupAndRestoreWithDNSSEC": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/backup_and_restore-TestBackupAndRestoreWithDNSSEC.yaml',
                    test: 'backup_and_restore-TestBackupAndRestoreWithDNSSEC',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::backup_and_restore::TestBackupAndRestoreWithKRA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/backup_and_restore-TestBackupAndRestoreWithKRA.yaml',
                    test: 'backup_and_restore-TestBackupAndRestoreWithKRA',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::backup_and_restore::TestBackupAndRestoreWithReplica": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/backup_and_restore-TestBackupAndRestoreWithReplica.yaml',
                    test: 'backup_and_restore-TestBackupAndRestoreWithReplica',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::backup_and_restore::TestBackupReinstallRestoreWithDNS": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/backup_and_restore-TestBackupReinstallRestoreWithDNS.yaml',
                    test: 'backup_and_restore-TestBackupReinstallRestoreWithDNS',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::backup_and_restore::TestBackupReinstallRestoreWithDNSSEC": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/backup_and_restore-TestBackupReinstallRestoreWithDNSSEC.yaml',
                    test: 'backup_and_restore-TestBackupReinstallRestoreWithDNSSEC',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::backup_and_restore::TestBackupReinstallRestoreWithKRA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/backup_and_restore-TestBackupReinstallRestoreWithKRA.yaml',
                    test: 'backup_and_restore-TestBackupReinstallRestoreWithKRA',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::backup_and_restore::TestReplicainstallAfterRestore": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/backup_and_restore-TestReplicainstallAfterRestore.yaml',
                    test: 'backup_and_restore-TestReplicainstallAfterRestore',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::backup_and_restore::TestUserRootFilesownershipPermiss": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/backup_and_restore-TestUserRootFilesownershipPermiss.yaml',
                    test: 'backup_and_restore-TestUserRootFilesownershipPermiss',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::backup_and_restore-TestBackupRoles": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/backup_and_restore-TestBackupRoles.yaml',
                    test: 'upstream-backup_and_restore-TestBackupRoles',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::caless-TestCertinstall": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/caless-TestCertinstall.yaml',
                    test: 'caless-TestCertinstall',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::caless-TestClientinstall": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/caless-TestClientinstall.yaml',
                    test: 'caless-TestClientinstall',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::caless-TestIPACommands": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/caless-TestIPACommands.yaml',
                    test: 'caless-TestIPACommands',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::caless-TestPKINIT": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/caless-TestPKINIT.yaml',
                    test: 'caless-TestPKINIT',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::caless-TestReplicaCALessToCAFull": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/caless-TestReplicaCALessToCAFull.yaml',
                    test: 'caless-TestReplicaCALessToCAFull',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::caless-TestServerCALessToExternalCA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/caless-TestServerCALessToExternalCA.yaml',
                    test: 'caless-TestServerCALessToExternalCA',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::caless-TestServerReplicaCALessToCAFull": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/caless-TestServerReplicaCALessToCAFull.yaml',
                    test: 'caless-TestServerReplicaCALessToCAFull',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::crlgen_manage": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/crlgen_manage.yaml',
                    test: 'crlgen_manage',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::customized_ds_config_install": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/customized_ds_config_install.yaml',
                    test: 'customized_ds_config_install',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::dns-locations": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/dns_locations.yaml',
                    test: 'dns-locations',
                    email: 'mvarun@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::external_ca::TestExternalCA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/external_ca-TestExternalCA.yaml',
                    test: 'external_ca-TestExternalCA',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::external_ca::TestSelfExternalSelf": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/external_ca-TestSelfExternalSelf.yaml',
                    test: 'external_ca-TestSelfExternalSelf',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::external_ca::TestExternalCAinvalidCert": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/external_ca-TestExternalCAinvalidCert.yaml',
                    test: 'external_ca-TestExternalCAinvalidCert',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::external_ca::TestExternalCAdirsrvStop": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/external_ca-TestExternalCAdirsrvStop.yaml',
                    test: 'external_ca-TestExternalCAdirsrvStop',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::external_ca::TestMultipleExternalCA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/external_ca-TestMultipleExternalCA.yaml',
                    test: 'external_ca-TestMultipleExternalCA',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::external_ca::TestExternalCAProfileScenarios": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/external_ca-TestExternalCAProfileScenarios.yaml',
                    test: 'external_ca-TestExternalCAProfileScenarios',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::forced_client_reenrollment": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/forced_client_reenrollment.yaml',
                    test: 'forced_client_reenrollment',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::http_kdc_proxy": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/http_kdc_proxy.yaml',
                    test: 'http_kdc_proxy',
                    email: 'ksiddiqu@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
/* Temporary disabled due to https://bugzilla.redhat.com/show_bug.cgi?id=1860129
            "upstream::idviews": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/idviews.yaml',
                    test: 'idviews',
                    email: 'mvarun@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
*/

            "upstream::kerberos_flags": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/kerberos_flags.yaml',
                    test: 'kerberos_flags',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::netgroup": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/netgroup.yaml',
                    test: 'netgroup',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::pkinit_manage": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/pkinit_manage.yaml',
                    test: 'pkinit_manage',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replica_promotion-TestHiddenReplicaPromotion": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replica_promotion-TestHiddenReplicaPromotion.yaml',
                    test: 'replica_promotion-TestHiddenReplicaPromotion',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replica_promotion-TestProhibitReplicaUninstallation": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replica_promotion-TestProhibitReplicaUninstallation.yaml',
                    test: 'replica_promotion-TestProhibitReplicaUninstallation',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replica_promotion-TestRenewalMaster": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replica_promotion-TestRenewalMaster.yaml',
                    test: 'replica_promotion-TestRenewalMaster',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replica_promotion-TestReplicainForwardZone": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replica_promotion-TestReplicainForwardZone.yaml',
                    test: 'replica_promotion-TestReplicainForwardZone',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replica_promotion-TestReplicainstallCustodia": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replica_promotion-TestReplicainstallCustodia.yaml',
                    test: 'replica_promotion-TestReplicainstallCustodia',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replica_promotion-TestReplicainstallWithExistingEntry": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replica_promotion-TestReplicainstallWithExistingEntry.yaml',
                    test: 'replica_promotion-TestReplicainstallWithExistingEntry',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replica_promotion-TestReplicaPromotionLevel1": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replica_promotion-TestReplicaPromotionLevel1.yaml',
                    test: 'replica_promotion-TestReplicaPromotionLevel1',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replica_promotion-TestSubCAkeyReplication": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replica_promotion-TestSubCAkeyReplication.yaml',
                    test: 'replica_promotion-TestSubCAkeyReplication',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replica_promotion-TestUnprivilegedUserPermissions": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replica_promotion-TestUnprivilegedUserPermissions.yaml',
                    test: 'replica_promotion-TestUnprivilegedUserPermissions',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replica_promotion-TestWrongClientDomain": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replica_promotion-TestWrongClientDomain.yaml',
                    test: 'replica_promotion-TestWrongClientDomain',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
            "upstream::replica_promotion-TestHiddenReplicaKRA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replica_promotion-TestHiddenReplicaKRA.yaml',
                    test: 'replica_promotion-TestHiddenReplicaKRA',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replication_layouts-TestStarTopologyWithoutCA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replication_layouts-TestStarTopologyWithoutCA.yaml',
                    test: 'replication_layouts-TestStarTopologyWithoutCA',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replication_layouts-TestCompleteTopologyWithCA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replication_layouts-TestCompleteTopologyWithCA.yaml',
                    test: 'replication_layouts-TestCompleteTopologyWithCA',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replication_layouts-TestCompleteTopologyWithCAKRA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replication_layouts-TestCompleteTopologyWithCAKRA.yaml',
                    test: 'replication_layouts-TestCompleteTopologyWithCAKRA',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replication_layouts-TestCompleteTopologyWithoutCA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replication_layouts-TestCompleteTopologyWithoutCA.yaml',
                    test: 'replication_layouts-TestCompleteTopologyWithoutCA',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replication_layouts-TestLineTopologyWithCA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replication_layouts-TestLineTopologyWithCA.yaml',
                    test: 'replication_layouts-TestLineTopologyWithCA',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replication_layouts-TestLineTopologyWithCAKRA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replication_layouts-TestLineTopologyWithCAKRA.yaml',
                    test: 'replication_layouts-TestLineTopologyWithCAKRA',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replication_layouts-TestLineTopologyWithoutCA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replication_layouts-TestLineTopologyWithoutCA.yaml',
                    test: 'replication_layouts-TestLineTopologyWithoutCA',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replication_layouts-TestStarTopologyWithCA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replication_layouts-TestStarTopologyWithCA.yaml',
                    test: 'replication_layouts-TestStarTopologyWithCA',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::replication_layouts-TestStarTopologyWithCAKRA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/replication_layouts-TestStarTopologyWithCAKRA.yaml',
                    test: 'replication_layouts-TestStarTopologyWithCAKRA',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::server_del": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/server_del.yaml',
                    test: 'server_del',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::service_permissions": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/service_permissions.yaml',
                    test: 'service_permissions',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::sudo": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/sudo.yaml',
                    test: 'sudo',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::topology-TestCASpecificRUVs": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/topology-TestCASpecificRUVs.yaml',
                    test: 'topology-TestCASpecificRUVs',
                    email: 'ndehadra@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::topology-TestTopologyOptions": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/topology-TestTopologyOptions.yaml',
                    test: 'topology-TestTopologyOptions',
                    email: 'ndehadra@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
/* Temporary disabled due to https://bugzilla.redhat.com/show_bug.cgi?id=1860129
            "upstream::trust": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/trust.yaml',
                    test: 'trust',
                    email: 'sorlov@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
*/
        
            "upstream::user-permissions": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/user_permissions.yaml',
                    test: 'user-permissions',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "upstream::vault": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/vault.yaml',
                    test: 'vault',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::healthcheck": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/healthcheck.yaml',
                    test: 'upstream-healthcheck',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::cert": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/cert.yaml',
                    test: 'upstream-cert',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::dnssec": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/dnssec.yaml',
                    test: 'dnssec',
                    email: 'sorlov@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallMaster": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallMaster.yaml',
                    test: 'installation-TestInstallMaster',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallMasterDNS": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallMasterDNS.yaml',
                    test: 'installation-TestInstallMasterDNS',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallMasterKRA": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallMasterKRA.yaml',
                    test: 'installation-TestInstallMasterKRA',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallWithCA1": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallWithCA1.yaml',
                    test: 'installation-TestInstallWithCA1',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallWithCA2": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallWithCA2.yaml',
                    test: 'installation-TestInstallWithCA2',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallWithCA_DNS1": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallWithCA_DNS1.yaml',
                    test: 'installation-TestInstallWithCA_DNS1',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallWithCA_DNS2": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallWithCA_DNS2.yaml',
                    test: 'installation-TestInstallWithCA_DNS2',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallWithCA_DNS3": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallWithCA_DNS3.yaml',
                    test: 'installation-TestInstallWithCA_DNS3',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallWithCA_DNS4": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallWithCA_DNS4.yaml',
                    test: 'installation-TestInstallWithCA_DNS4',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallWithCA_KRA1": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallWithCA_KRA1.yaml',
                    test: 'installation-TestInstallWithCA_KRA1',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallWithCA_KRA2": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallWithCA_KRA2.yaml',
                    test: 'installation-TestInstallWithCA_KRA2',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallWithCA_KRA_DNS1": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallWithCA_KRA_DNS1.yaml',
                    test: 'installation-TestInstallWithCA_KRA_DNS1',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallWithCA_KRA_DNS2": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallWithCA_KRA_DNS2.yaml',
                    test: 'installation-TestInstallWithCA_KRA_DNS2',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::installation-TestInstallReplicaAgainstSpecificServer": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/installation-TestInstallReplicaAgainstSpecificServer.yaml',
                    test: 'installation-TestInstallReplicaAgainstSpecificServer',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "upstream::uninstallation": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/upstream/integration/uninstallation.yaml',
                    test: 'uninstallation',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            }
            )
        }
    } catch (Exception e) {
        sh script: "echo TestSuiteFailed"
        currentBuild.result = 'SUCCESS'
    }
    try {
        stage("pytests") {
          parallel(
            "pytest::client_install": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/client_install.yaml',
                    test: 'client-install',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::dns_services": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/dns_services.yaml',
                    test: 'dns-services',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::external_ca": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/external_ca.yaml',
                    test: 'external_ca',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::functional_services": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/functional_services.yaml',
                    test: 'functional-services',
                    email: 'ksiddiqu@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::ipa-advise": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa-advise.yaml',
                    test: 'ipa-advise',
                    email: 'ksiddiqu@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::ipa-cert": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa-cert.yaml',
                    test: 'ipa-cert',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::ipa-certprofile": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa-certprofile.yaml',
                    test: 'ipa-certprofile',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::ipa-getcert": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa-getcert.yaml',
                    test: 'ipa-getcert',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::ipa-hbac": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa-hbac.yaml',
                    test: 'ipa-hbac',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::ipa-host": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa-host.yaml',
                    test: 'ipa-host',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::ipa-rbac": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa-rbac.yaml',
                    test: 'ipa-rbac',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::ipa-replica_promotion": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa-replica_promotion.yaml',
                    test: 'ipa-replica_promotion',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::otp": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/otp.yaml',
                    test: 'otp',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::subca": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/subca.yaml',
                    test: 'subca',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

/* Temporary disabled due to https://bugzilla.redhat.com/show_bug.cgi?id=1860129
            "pytest::external_trust": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/external_trust.yaml',
                    test: 'external-trust',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
*/
        
            "pytest::ipa_backup_restore": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa_backup_restore.yaml',
                    test: 'ipa_backup_restore',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
/* Temporary disabled due to https://bugzilla.redhat.com/show_bug.cgi?id=1860129
            "pytest::ipa-idoverride": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa-idoverride.yaml',
                    test: 'ipa-idoverride',
                    email: 'mvarun@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
*/
        
            "pytest::ipa-nis-manage": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa-nis-manage.yaml',
                    test: 'ipa-nis-manage',
                    email: 'ksiddiqu@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::ipa-services": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa-services.yaml',
                    test: 'ipa-services',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::ipa-sudo": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa-sudo.yaml',
                    test: 'ipa-sudo',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::ipa-user": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipa-user.yaml',
                    test: 'ipa-user',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::kdcproxy": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/kdcproxy.yaml',
                    test: 'kdcproxy',
                    email: 'ksiddiqu@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::replica-install": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/replica-install.yaml',
                    test: 'replica-install',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::server-role": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/server-role.yaml',
                    test: 'server-role',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::sudo-ipa-schema": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/sudo-ipa-schema.yaml',
                    test: 'sudo-ipa-schema',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
/* Temporary disabled due to https://bugzilla.redhat.com/show_bug.cgi?id=1860129
            "pytest::trust-one-way": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/trust-one-way.yaml',
                    test: 'trust-one-way',
                    email: 'ksiddiqu@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
        
            "pytest::upn": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/upn.yaml',
                    test: 'upn',
                    email: 'mvarun@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
*/
        
            "pytest::vault": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/vault.yaml',
                    test: 'vault',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "pytest::server-install": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/server-install.yaml',
                    test: 'server-install',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "pytest::ca_cert_renewal": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ca_cert_renewal.yaml',
                    test: 'ca_cert_renewal',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "pytest::ipv6": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/ipv6.yaml',
                    test: 'ipv6',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "pytest::performance-tests": {
                new TeRun([
                    metadata: 'https://gitlab.cee.redhat.com/identity-management/ipa-pytests/raw/RHEL8.4/metadata/pytests/performance-tests.yaml',
                    test: 'performance-tests',
                    email: 'ksiddiqu@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            }
            )
        }
    } catch (Exception e) {
        sh script: "echo TestSuiteFailed"
        currentBuild.result = 'SUCCESS'
    }
    try {
        stage("bash") {
          parallel(
            "bash::ipa-automember": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-automember.yaml",
                    test: 'ipa-automember',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-automount": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-automount.yaml",
                    test: 'ipa-automount',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-config": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-config.yaml",
                    test: 'ipa-config',
                    email: 'sorlov@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::cert": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-cert.yaml",
                    test: 'ipa-cert',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-ctl": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-ctl.yaml",
                    test: 'ipa-ctl',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-default": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-default.yaml",
                    test: 'ipa-default',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-delegation-cli": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-delegation-cli.yaml",
                    test: 'ipa-delegation-cli',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::dns": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-dns.yaml",
                    test: 'ipa-dns',
                    email: 'sorlov@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::getcert": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-getcert.yaml",
                    test: 'ipa-getcert',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-get-rm-keytab": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-get-rm-keytab.yaml",
                    test: 'ipa-get-rm-keytab',
                    email: 'ksiddiqu@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-group-cli": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-group-cli.yaml",
                    test: 'ipa-group-cli',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-hbac-cli": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-hbac-cli.yaml",
                    test: 'ipa-hbac-cli',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-hbac-func": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-hbac-func.yaml",
                    test: 'ipa-hbac-func',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-hbacsvc-cli": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-hbacsvc-cli.yaml",
                    test: 'ipa-hbacsvc-cli',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-host-cli": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-host-cli.yaml",
                    test: 'ipa-host-cli',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-hostgroup-cli": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-hostgroup-cli.yaml",
                    test: 'ipa-hostgroup-cli',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-i18n": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-i18n.yaml",
                    test: 'ipa-i18n',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::krbtpolicy": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-krbtpolicy.yaml",
                    test: 'ipa-krbtpolicy',
                    email: 'sorlov@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-migration": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-migration.yaml",
                    test: 'ipa-migration',
                    email: 'ndehadra@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-netgroup-cli": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-netgroup-cli.yaml",
                    test: 'ipa-netgroup-cli',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::password": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-password.yaml",
                    test: 'ipa-password',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-selfservice": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-selfservice.yaml",
                    test: 'ipa-selfservice',
                    email: 'mvarun@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-selinuxusermap-cli": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-selinuxusermap-cli.yaml",
                    test: 'ipa-selinuxusermap-cli',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-services": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-services.yaml",
                    test: 'ipa-services',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ssh-functional": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-ssh-functional.yaml",
                    test: 'ipa-ssh-functional',
                    email: 'mvarun@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
            
            "bash::sudo": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-sudo.yaml",
                    test: 'ipa-sudo',
                    email: 'ssidhaye@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

/* Temporary disabled due to https://bugzilla.redhat.com/show_bug.cgi?id=1860129
            "bash::trust-functional-ssh": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-trust-func-ssh.yaml",
                    test: 'ipa-trust-functional-ssh',
                    email: 'ksiddiqu@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::trust-functional-user": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-trust-func-user.yaml",
                    test: 'ipa-trust-functional-user',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-upgrade_normal": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-upgrade_normal.yaml",
                    test: 'ipa-upgrade_normal',
                    email: 'ndehadra@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-upgrade_bztests": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-upgrade_bztests.yaml",
                    test: 'ipa-upgrade_bztests',
                    email: 'ndehadra@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-upgrade_parallel": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-upgrade_parallel.yaml",
                    test: 'ipa-upgrade_parallel',
                    email: 'ndehadra@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-upgrade_reverse": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-upgrade_reverse.yaml",
                    test: 'ipa-upgrade_reverse',
                    email: 'ndehadra@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
            
            "bash::ipa-upgrade_dirsrvoff": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-upgrade_dirsrvoff.yaml",
                    test: 'ipa-upgrade_dirsrvoff',
                    email: 'ndehadra@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
*/

            "bash::user-cli-adduser": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-user-cli-adduser.yaml",
                    test: 'ipa-user-cli-adduser',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::user-cli-moduser": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-user-cli-moduser.yaml",
                    test: 'ipa-user-cli-moduser',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ds-migration": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ds-migration.yaml",
                    test: 'ds-migration',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ds-migration-func": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ds-migration-func.yaml",
                    test: 'ds-migration-func',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-client-cert": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-client-cert.yaml",
                    test: 'ipa-client-cert',
                    email: 'mvarun@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::install-client-cli": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/install-client-cli.yaml",
                    test: 'install-client-cli',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

/* Temporary disabled due to https://bugzilla.redhat.com/show_bug.cgi?id=1860129
            "bash::ipa-adtrust": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-adtrust.yaml",
                    test: 'ipa-adtrust',
                    email: 'sorlov@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
*/

            "bash::ipa-client-automount": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-client-automount.yaml",
                    test: 'ipa-client-automount',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

/* Temporary disabled due to https://bugzilla.redhat.com/show_bug.cgi?id=1860129
            "bash::ipa-idrange-cli": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-idrange-cli.yaml",
                    test: 'ipa-idrange-cli',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
*/

            "bash::ipa-join": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-join.yaml",
                    test: 'ipa-join',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-krblockout": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-krblockout.yaml",
                    test: 'ipa-krblockout',
                    email: 'sorlov@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-nis-integration": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-nis-integration.yaml",
                    test: 'ipa-nis-integration',
                    email: 'sorlov@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

/* Temporary disabled due to https://bugzilla.redhat.com/show_bug.cgi?id=1860129
            "bash::ipa-realmdomains-cli": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-realmdomains-cli.yaml",
                    test: 'ipa-realmdomains-cli',
                    email: 'mvarun@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-selinuxusermap-func": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-selinuxusermap-func.yaml",
                    test: 'ipa-selinuxusermap-func',
                    email: 'myusuf@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-trust-cli": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-trust-cli.yaml",
                    test: 'ipa-trust-cli',
                    email: 'mvarun@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-trust-func-hbac": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-trust-func-hbac.yaml",
                    test: 'ipa-trust-func-hbac',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-trust-func-httpkrb": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-trust-func-httpkrb.yaml",
                    test: 'ipa-trust-func-httpkrb',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-trust-func-selinux-usermap": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-trust-func-selinux-usermap.yaml",
                    test: 'ipa-trust-func-selinux-usermap',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::ipa-trust-func-automount": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-trust-func-automount.yaml",
                    test: 'ipa-trust-func-automount',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
            
            "bash::ipa-trust-func-sudo": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ipa-trust-func-sudo.yaml",
                    test: 'ipa-trust-func-sudo',
                    email: 'amore@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },
*/

            "bash::ds-migration-performance": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/ds-migration-performance.yaml",
                    test: 'ds-migration-performance',
                    email: 'sumenon@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            },

            "bash::install-server-cli": {
                new TeRun([
                    metadata: "https://gitlab.cee.redhat.com/identity-management/ipa-tests/raw/RHEL8.4/metadata/install-server-cli.yaml",
                    test: 'install-server-cli',
                    email: 'mpolovka@redhat.com'
                ]).exec(env.IDMCI_SLAVE)
            }            
            )
        }
    } catch (Exception e) {
        sh script: "echo TestSuiteFailed"
        currentBuild.result = 'SUCCESS'
    }   
}

